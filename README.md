# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack


Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/types/components/view/ — папка с типами отображаемых компонентов 
- src/types/common/ — папка с типами переиспользуемых компонентов
- src/types/model/ — папка с типами состояния модели Данных
- src/types/base/ — папка с типами базового кода

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

Приложение реализовано в архитектуре **MVC с событийной шиной**. Основные части:

- **Модели (Models)** — хранят и управляют данными приложения.
- **Представления (Views)** — отвечают за визуализацию и отображение интерфейса.
- **API** — слой работы с сервером.
- **Базовые классы (Base)** — абстракции для элементов, сущностей и событий.
- **События (Events)** — связующее звено между моделями и представлениями.

### Взаимодействие частей
- **Модели** уведомляют о изменениях через события (`EventEmitter`).
- **Представления** подписываются на события и обновляют интерфейс.
- **API** поставляет данные в модели.
- **Контроллер** (index.ts) связывает всё воедино, настраивает взаимодействие.

### Данные в приложении
Используются следующие сущности:
- **Товар (Product)** — данные о товаре (id, title, description, price, image и т.п.).
- **Корзина (CartModel)** — список выбранных товаров, общая сумма.
- **Заказ (PurchaseModel)** — информация о заказе (список товаров, данные покупателя).
- **Коллекция (CollectionModel<T>)** — универсальное хранилище набора данных.

## Компоненты проекта

### API
- **`Api`** — базовый класс для работы с запросами.
- **`ProductApi`** — реализация для загрузки данных о товарах.

### Модели
- **`Entity<T>`** — базовый класс сущности.
- **`CollectionModel<T>`** — универсальное хранилище коллекций.
- **`CartModel`** — корзина пользователя.
- **`PurchaseModel`** — оформление заказа.

### Представления (Views)
- **`PageView`** — основная страница приложения.
- **`Cart`** — отображение корзины.
- **`Confirmation`** — экран подтверждения заказа.
- **`ContactForm`** — форма ввода контактов.
- **`Dialog`** — модальное окно.
- **`FormBase<T>`** — базовый класс для форм.
- **`ItemCard`** — карточка товара.
- **`PurchaseForm`** — форма оформления заказа.

### События
- **`EventEmitter`** — реализация паттерна Publisher/Subscriber для общения компонентов.

## Реализация процессов
- Все процессы основаны на **событийной системе** через `EventEmitter`.
- Каждое изменение в модели триггерит событие → представление обновляется.
- Потоки данных однонаправленные: API → Model → Event → View.

---

# Документация классов

## `Api`
- **Назначение:** базовый класс для HTTP-запросов.
- **Конструктор:** `(baseUrl: string, options?: RequestInit)`
- **Свойства:**
  - `baseUrl: string` — адрес API.
  - `options: RequestInit` — параметры по умолчанию.
- **Методы:**
  - `get<T>(url: string): Promise<T>`
  - `post<T>(url: string, data: object): Promise<T>`

## `ProductApi`
- **Назначение:** работа с товарами.
- **Методы:**
  - `getProducts(): Promise<Product[]>`
  - `getProduct(id: string): Promise<Product>`

## `Entity<T>`
- **Назначение:** базовый класс сущности.
- **Конструктор:** `(data: T)`
- **Свойства:**
  - `id: string`
- **Методы:**
  - `getData(): T`

## `CollectionModel<T>`
- **Назначение:** хранение коллекций.
- **Конструктор:** `(items: T[])`
- **Свойства:**
  - `items: T[]`
- **Методы:**
  - `getAll(): T[]`
  - `getById(id: string): T | undefined`

## `CartModel`
- **Назначение:** корзина пользователя.
- **Свойства:**
  - `items: Product[]`
  - `total: number`
- **Методы:**
  - `add(item: Product): void`
  - `remove(id: string): void`
  - `clear(): void`

## `PurchaseModel`
- **Назначение:** данные заказа.
- **Свойства:**
  - `products: Product[]`
  - `contacts: { name: string; email: string }`
- **Методы:**
  - `submit(): Promise<void>`

## `Element`
- **Назначение:** базовый класс для UI-элементов.
- **Свойства:**
  - `element: HTMLElement`
- **Методы:**
  - `render(): HTMLElement`

## `EventEmitter`
- **Назначение:** управление событиями.
- **Методы:**
  - `on(event: string, callback: Function): void`
  - `emit(event: string, data?: unknown): void`

## Views

### `PageView`
- **Свойства:** контейнеры для отображения разных блоков.
- **Методы:** `render()`

### `Cart`
- Отображение содержимого корзины.

### `Confirmation`
- Экран подтверждения заказа.

### `ContactForm`
- Форма ввода данных.

### `Dialog`
- Модальное окно.

### `FormBase<T>`
- Базовый класс для форм с дженериком.

### `ItemCard`
- Карточка товара.

### `PurchaseForm`
- Форма для оформления заказа.

--