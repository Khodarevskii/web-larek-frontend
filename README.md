# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack


Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/types/components/view/ — папка с типами отображаемых компонентов 
- src/types/common/ — папка с типами переиспользуемых компонентов
- src/types/model/ — папка с типами состояния модели Данных
- src/types/base/ — папка с типами базового кода

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

Приложение реализовано в архитектуре **MVC с событийной шиной**. Основные части:

- **Модели (Models)** — хранят и управляют данными приложения.
- **Представления (Views)** — отвечают за визуализацию и отображение интерфейса.
- **API** — слой работы с сервером.
- **Базовые классы (Base)** — абстракции для элементов, сущностей и событий.
- **События (Events)** — связующее звено между моделями и представлениями.

## Архитектура проекта

Приложение построено на архитектуре **MVC с событийной моделью**. Основные элементы:

- **Модели (Models)** — управляют данными и бизнес-логикой.
- **Представления (Views)** — отвечают за отрисовку и обновление UI.
- **API** — слой для взаимодействия с сервером.
- **Базовые классы** — абстракции, на которых строятся модели и представления.
- **События (Events)** — механизм связи компонентов через `EventEmitter`.

### Взаимодействие частей

- API получает данные с сервера и передаёт их в модели.
- Модели изменяются и генерируют события.
- Представления подписываются на события и обновляют интерфейс.
- Главный файл `index.ts` инициализирует приложение и связывает части.

### Данные

Используются типы и интерфейсы:

- `Product` (товар) — id, название, описание, цена, изображение, категория.
- `CartModel` — товары в корзине и сумма заказа.
- `PurchaseModel` — заказ, включая товары и контакты.
- `CollectionModel<T>` — универсальное хранилище элементов.

---

## Документация классов

### `Api`

- **Назначение:** базовый класс для HTTP-запросов.
- **Конструктор:** `(baseUrl: string, options?: RequestInit)`
  - `baseUrl` — базовый адрес API.
  - `options` — параметры по умолчанию для fetch.
- **Свойства:**
  - `baseUrl: string` — базовый адрес.
  - `options: RequestInit` — опции запросов.
- **Методы:**
  - `get<T>(url: string): Promise<T>` — GET-запрос, возвращает данные указанного типа.
  - `post<T>(url: string, data: object, method?: string): Promise<T>` — POST/PUT/DELETE-запрос.

### `ProductApi`

- **Назначение:** работа с товарами.
- **Методы:**
  - `getProducts(): Promise<Product[]>` — получает список товаров.
  - `getProduct(id: string): Promise<Product>` — получает товар по id.
  - `orderProducts(order: OrderPayload): Promise<OrderReply>` — оформляет заказ.

### `Entity<T>`

- **Назначение:** базовый класс для сущностей.
- **Конструктор:** `(data: T)` — принимает объект с данными.
- **Свойства:**
  - `id: string` — идентификатор.
- **Методы:**
  - `getData(): T` — возвращает исходные данные.

### `CollectionModel<T>`

- **Назначение:** хранение набора сущностей.
- **Конструктор:** `(items: T[])`
  - `items` — массив элементов.
- **Свойства:**
  - `items: T[]` — коллекция.
- **Методы:**
  - `getAll(): T[]` — вернуть все элементы.
  - `getById(id: string): T | undefined` — найти элемент по id.

### `CartModel`

- **Назначение:** управление корзиной.
- **Конструктор:** `(items: Product[] = [])`
  - `items` — стартовые товары.
- **Свойства:**
  - `items: Product[]` — товары в корзине.
  - `total: number` — общая сумма.
- **Методы:**
  - `add(item: Product): void` — добавить товар, вызывает событие `cart:updated`.
  - `remove(id: string): void` — удалить товар по id.
  - `clear(): void` — очистить корзину.

### `PurchaseModel`

- **Назначение:** оформление заказа.
- **Свойства:**
  - `products: Product[]` — список товаров.
  - `contacts: { name: string; email: string }` — данные клиента.
- **Методы:**
  - `submit(): Promise<void>` — отправить заказ через API.

### `Element`

- **Назначение:** базовый класс UI-элементов.
- **Конструктор:** `(element: HTMLElement)`
  - `element` — DOM-элемент.
- **Свойства:**
  - `element: HTMLElement` — корневой элемент.
- **Методы:**
  - `render(): HTMLElement` — вернуть отрисованный элемент.

### `EventEmitter`

- **Назначение:** событийная шина.
- **Методы:**
  - `on(event: string, callback: Function): void` — подписка на событие.
  - `emit(event: string, data?: unknown): void` — вызов события.
  - `off(event: string, callback: Function): void` — отписка.

### Views

#### `PageView`

- **Назначение:** главный экран.
- **Свойства:** контейнеры для разных секций.
- **Методы:**
  - `render()` — отрисовать страницу.

#### `Cart`

- **Назначение:** отображение содержимого корзины.
- **Методы:**
  - `render()` — отобразить товары.

#### `Confirmation`

- **Назначение:** экран подтверждения заказа.
- **Методы:**
  - `render()` — показать сообщение.

#### `ContactForm`

- **Назначение:** форма для ввода контактов.
- **Свойства:** поля ввода.
- **Методы:**
  - `validate()` — проверка данных.

#### `Dialog`

- **Назначение:** модальное окно.
- **Методы:**
  - `open()` — открыть диалог.
  - `close()` — закрыть.

#### `FormBase<T>`

- **Назначение:** базовый класс форм.
- **Свойства:**
  - `values: T` — значения полей.
- **Методы:**
  - `getValue(name: string): unknown` — получить значение.
  - `setValue(name: string, value: unknown)` — установить значение.

#### `ItemCard`

- **Назначение:** карточка товара.
- **Свойства:**
  - `product: Product`
- **Методы:**
  - `render()` — отрисовать карточку.

#### `PurchaseForm`

- **Назначение:** форма заказа.
- **Методы:**
  - `validate()` — проверка.
  - `submit()` — отправка.
