{"version":3,"file":"main.js","mappings":"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","sources":["webpack://my-webpack-project/./src/components/base/events.ts","webpack://my-webpack-project/./src/components/api/ProductApi.ts","webpack://my-webpack-project/./src/components/base/api.ts","webpack://my-webpack-project/./src/components/base/Entity.ts","webpack://my-webpack-project/./src/components/models/CollectionModel.ts","webpack://my-webpack-project/./src/components/models/Cart.ts","webpack://my-webpack-project/./src/components/models/PurchaseModel.ts","webpack://my-webpack-project/./src/components/base/Element.ts","webpack://my-webpack-project/./src/components/views/PageView.ts","webpack://my-webpack-project/./src/components/views/ItemCard.ts","webpack://my-webpack-project/./src/components/views/Dialog.ts","webpack://my-webpack-project/./src/components/views/Cart.ts","webpack://my-webpack-project/./src/components/views/FormBase.ts","webpack://my-webpack-project/./src/components/views/PurchaseForm.ts","webpack://my-webpack-project/./src/components/views/ContactForm.ts","webpack://my-webpack-project/./src/components/views/Confirmation.ts","webpack://my-webpack-project/./src/utils/constants.ts","webpack://my-webpack-project/./src/utils/utils.ts","webpack://my-webpack-project/./src/index.ts"],"sourcesContent":["/**\n * Брокер событий, классическая реализация\n * В расширенных вариантах есть возможность подписаться на все события\n * или слушать события по шаблону например\n */\nexport class EventEmitter {\n    constructor() {\n        this._events = new Map();\n    }\n    /**\n     * Установить обработчик на событие\n     */\n    on(eventName, callback) {\n        var _a;\n        if (!this._events.has(eventName)) {\n            this._events.set(eventName, new Set());\n        }\n        (_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.add(callback);\n    }\n    /**\n     * Снять обработчик с события\n     */\n    off(eventName, callback) {\n        var _a;\n        if (this._events.has(eventName)) {\n            this._events.get(eventName).delete(callback);\n            if (((_a = this._events.get(eventName)) === null || _a === void 0 ? void 0 : _a.size) === 0) {\n                this._events.delete(eventName);\n            }\n        }\n    }\n    /**\n     * Инициировать событие с данными\n     */\n    emit(eventName, data) {\n        this._events.forEach((subscribers, name) => {\n            if (name === '*')\n                subscribers.forEach(callback => callback({\n                    eventName,\n                    data\n                }));\n            if (name instanceof RegExp && name.test(eventName) || name === eventName) {\n                subscribers.forEach(callback => callback(data));\n            }\n        });\n    }\n    /**\n     * Слушать все события\n     */\n    onAll(callback) {\n        this.on(\"*\", callback);\n    }\n    /**\n     * Сбросить все обработчики\n     */\n    offAll() {\n        this._events = new Map();\n    }\n    /**\n     * Сделать коллбек триггер, генерирующий событие при вызове\n     */\n    trigger(eventName, context) {\n        return (event = {}) => {\n            this.emit(eventName, Object.assign(Object.assign({}, (event || {})), (context || {})));\n        };\n    }\n}\n","import { Api } from '../base/api';\nexport class ProductApi extends Api {\n    constructor(cdn, baseUrl, options) {\n        super(baseUrl, options);\n        this.cdn = cdn;\n    }\n    getProduct(id) {\n        return this.get(`/product/${id}`).then((item) => (Object.assign(Object.assign({}, item), { image: this.cdn + item.image })));\n    }\n    getProductList() {\n        return this.get('/product').then((data) => data.items.map((item) => (Object.assign(Object.assign({}, item), { image: this.cdn + item.image }))));\n    }\n    orderProducts(order) {\n        return this.post('/order', order).then((data) => data);\n    }\n}\n","export class Api {\n    constructor(baseUrl, options = {}) {\n        var _a;\n        this.baseUrl = baseUrl;\n        this.options = {\n            headers: Object.assign({ 'Content-Type': 'application/json' }, ((_a = options.headers) !== null && _a !== void 0 ? _a : {}))\n        };\n    }\n    handleResponse(response) {\n        if (response.ok)\n            return response.json();\n        else\n            return response.json()\n                .then(data => { var _a; return Promise.reject((_a = data.error) !== null && _a !== void 0 ? _a : response.statusText); });\n    }\n    get(uri) {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method: 'GET' })).then(this.handleResponse);\n    }\n    post(uri, data, method = 'POST') {\n        return fetch(this.baseUrl + uri, Object.assign(Object.assign({}, this.options), { method, body: JSON.stringify(data) })).then(this.handleResponse);\n    }\n}\n","export class Entity {\n    constructor(data, events) {\n        this.events = events;\n        Object.assign(this, data);\n    }\n    emitChanges(event, payload) {\n        this.events.emit(event, payload !== null && payload !== void 0 ? payload : {});\n    }\n}\n","import { Entity } from '../base/Entity';\nexport class CollectionModel extends Entity {\n    constructor(events) {\n        super([], events);\n        this.products = [];\n    }\n    setProducts(products) {\n        this.products = products.map(product => ({\n            id: product.id,\n            title: product.title,\n            description: product.description,\n            price: product.price,\n            image: product.image,\n            category: product.category\n        }));\n        this.emitChanges('catalog:changed', { products: this.products });\n    }\n    getProducts() {\n        return Promise.resolve(this.products);\n    }\n    getProduct(id) {\n        return this.products.find(product => product.id === id);\n    }\n    getTotal() {\n        return this.products.length;\n    }\n}\n","import { Entity } from '../base/Entity';\nexport class CartModel extends Entity {\n    constructor(events) {\n        super({ items: [], total: 0, count: 0 }, events);\n        this.items = new Map();\n    }\n    add(product) {\n        if (product.price === null) {\n            return;\n        }\n        if (this.items.has(product.id)) {\n            return;\n        }\n        this.items.set(product.id, {\n            product,\n            quantity: 1\n        });\n        this.emitChanges('cart:updated', {\n            items: this.getItems(),\n            total: this.getTotal(),\n            count: this.getCount()\n        });\n    }\n    remove(productId) {\n        if (this.items.has(productId)) {\n            this.items.delete(productId);\n            this.emitChanges('cart:updated', {\n                items: this.getItems(),\n                total: this.getTotal(),\n                count: this.getCount()\n            });\n        }\n    }\n    clear() {\n        this.items.clear();\n        this.emitChanges('cart:updated', {\n            items: [],\n            total: 0,\n            count: 0\n        });\n    }\n    getTotal() {\n        return Array.from(this.items.values()).reduce((total, item) => total + (item.product.price || 0), 0);\n    }\n    getCount() {\n        return this.items.size;\n    }\n    getItems() {\n        return Array.from(this.items.values());\n    }\n    contains(productId) {\n        return this.items.has(productId);\n    }\n}\n","import { Entity } from '../base/Entity';\nexport class PurchaseModel extends Entity {\n    constructor(events) {\n        super({}, events);\n        this.order = {};\n    }\n    setPayment(payment) {\n        this.order.payment = payment;\n        this.emitChanges('order:changed', this.order);\n    }\n    setEmail(email) {\n        this.order.email = email;\n        this.emitChanges('order:changed', this.order);\n    }\n    setPhone(phone) {\n        this.order.phone = phone;\n        this.emitChanges('order:changed', this.order);\n    }\n    setAddress(address) {\n        this.order.address = address;\n        this.emitChanges('order:changed', this.order);\n    }\n    validateOrder() {\n        var _a;\n        return !!(this.order.payment && ((_a = this.order.address) === null || _a === void 0 ? void 0 : _a.trim()));\n    }\n    validateContacts() {\n        var _a, _b;\n        return !!(((_a = this.order.email) === null || _a === void 0 ? void 0 : _a.trim()) && ((_b = this.order.phone) === null || _b === void 0 ? void 0 : _b.trim()) && /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.order.email));\n    }\n    clear() {\n        this.order = {};\n        this.emitChanges('order:changed', this.order);\n    }\n    getOrderData(items, total) {\n        return Object.assign(Object.assign({}, this.order), { items,\n            total });\n    }\n    getOrderErrors() {\n        var _a;\n        const errors = [];\n        if (!this.order.payment) {\n            errors.push('Необходимо выбрать способ оплаты');\n        }\n        if (!((_a = this.order.address) === null || _a === void 0 ? void 0 : _a.trim())) {\n            errors.push('Необходимо указать адрес доставки');\n        }\n        return errors;\n    }\n    getContactsErrors() {\n        var _a, _b;\n        const errors = [];\n        if (!((_a = this.order.email) === null || _a === void 0 ? void 0 : _a.trim())) {\n            errors.push('Необходимо указать email');\n        }\n        else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.order.email)) {\n            errors.push('Некорректный формат email');\n        }\n        if (!((_b = this.order.phone) === null || _b === void 0 ? void 0 : _b.trim())) {\n            errors.push('Необходимо указать телефон');\n        }\n        return errors;\n    }\n    getErrors() {\n        return [...this.getOrderErrors(), ...this.getContactsErrors()];\n    }\n}\n","export class Element {\n    constructor(container) {\n        this.container = container;\n    }\n    toggleClass(element, className, force) {\n        element.classList.toggle(className, force);\n    }\n    setText(element, value) {\n        if (element) {\n            element.textContent = String(value);\n        }\n    }\n    setElementDisabled(element, state) {\n        if (element) {\n            if (state)\n                element.setAttribute('disabled', 'disabled');\n            else\n                element.removeAttribute('disabled');\n        }\n    }\n    setHidden(element) {\n        element.style.display = 'none';\n    }\n    setVisible(element) {\n        element.style.removeProperty('display');\n    }\n    setImage(element, src, alt) {\n        if (element) {\n            element.src = src;\n            if (alt) {\n                element.alt = alt;\n            }\n        }\n    }\n    render(data) {\n        Object.assign(this, data !== null && data !== void 0 ? data : {});\n        return this.container;\n    }\n}\n","import { Element } from '../base/Element';\nexport class PageView extends Element {\n    constructor(container, events) {\n        super(container);\n        this.events = events;\n        this._counter = container.querySelector('.header__basket-counter');\n        this._catalog = container.querySelector('.gallery');\n        this._wrapper = container.querySelector('.page__wrapper');\n        this._basket = container.querySelector('.header__basket');\n        this._basket.addEventListener('click', () => {\n            this.events.emit('basket:open');\n        });\n    }\n    set counter(value) {\n        this.setText(this._counter, String(value));\n    }\n    set catalog(items) {\n        this._catalog.replaceChildren(...items);\n    }\n    set locked(value) {\n        this.toggleClass(this._wrapper, 'page__wrapper_locked', value);\n    }\n}\n","import { Element } from '../base/Element';\nconst CategoryClass = {\n    'софт-скил': 'card__category_soft',\n    'хард-скил': 'card__category_hard',\n    'дополнительное': 'card__category_additional',\n    'кнопка': 'card__category_button',\n    'другое': 'card__category_other'\n};\nexport class ItemCard extends Element {\n    constructor(blockName, container, actions) {\n        super(container);\n        this.blockName = blockName;\n        this._title = container.querySelector(`.${blockName}__title`);\n        this._image = container.querySelector(`.${blockName}__image`);\n        this._button = container.querySelector(`.${blockName}__button`);\n        this._description = container.querySelector(`.${blockName}__text`);\n        this._category = container.querySelector(`.${blockName}__category`);\n        this._price = container.querySelector(`.${blockName}__price`);\n        this._index = container.querySelector('.basket__item-index');\n        if (actions === null || actions === void 0 ? void 0 : actions.click) {\n            if (this._button) {\n                this._button.addEventListener('click', actions.click);\n            }\n            else {\n                container.addEventListener('click', actions.click);\n            }\n        }\n    }\n    set id(value) {\n        this.container.dataset.id = value;\n    }\n    get id() {\n        return this.container.dataset.id || '';\n    }\n    set title(value) {\n        this.setText(this._title, value);\n    }\n    get title() {\n        return this._title.textContent || '';\n    }\n    set image(value) {\n        this.setImage(this._image, value, this.title);\n    }\n    set description(value) {\n        this.setText(this._description, value);\n    }\n    set category(value) {\n        this.setText(this._category, value);\n        if (!this._category.classList.contains(CategoryClass[value])) {\n            this.toggleClass(this._category, `${CategoryClass[value]}`);\n        }\n    }\n    set price(value) {\n        this.setText(this._price, value ? `${value} синапсов` : 'Бесценно');\n        if (this._button && !value) {\n            this.setElementDisabled(this._button, true);\n        }\n    }\n    set index(value) {\n        this.setText(this._index, value.toString());\n    }\n    set button(data) {\n        if (this._button) {\n            this.setText(this._button, data.text);\n            this.setElementDisabled(this._button, data.disabled);\n        }\n    }\n}\n","import { Element } from '../base/Element';\nexport class Dialog extends Element {\n    constructor(container, events) {\n        super(container);\n        this.events = events;\n        this._closeButton = container.querySelector('.modal__close');\n        this._content = container.querySelector('.modal__content');\n        this.container.addEventListener('click', this.close.bind(this));\n        this._content.addEventListener('click', (event) => event.stopPropagation());\n    }\n    set content(value) {\n        this._content.replaceChildren(value);\n    }\n    open() {\n        if (!this.container.classList.contains('modal_active')) {\n            this.toggleClass(this.container, 'modal_active');\n        }\n        this.events.emit('modal:open');\n    }\n    close() {\n        this.toggleClass(this.container, 'modal_active');\n        this.content = null;\n        this.events.emit('modal:close');\n    }\n    render(data) {\n        super.render(data);\n        this.open();\n        return this.container;\n    }\n}\n","import { Element } from '../base/Element';\nexport class Cart extends Element {\n    constructor(container, events) {\n        super(container);\n        this.events = events;\n        this._list = container.querySelector('.basket__list');\n        this._total = container.querySelector('.basket__price');\n        this._button = container.querySelector('.basket__button');\n        if (this._button) {\n            this._button.addEventListener('click', () => {\n                events.emit('order:open');\n            });\n        }\n        this.items = [];\n    }\n    set items(items) {\n        if (items.length) {\n            this._list.replaceChildren(...items);\n        }\n        else {\n            this._list.replaceChildren(this.createElement('p', {\n                textContent: 'Корзина пуста'\n            }));\n        }\n    }\n    set selected(items) {\n        this.setElementDisabled(this._button, !items);\n    }\n    set total(total) {\n        this.setText(this._total, `${total} синапсов`);\n    }\n    createElement(tagName, props) {\n        const element = document.createElement(tagName);\n        if (props) {\n            Object.assign(element, props);\n        }\n        return element;\n    }\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Element } from '../base/Element';\nexport class FormBase extends Element {\n    constructor(container, events) {\n        super(container);\n        this.events = events;\n        this._submit = container.querySelector('button[type=submit]');\n        this._errors = container.querySelector('.form__errors');\n        this.container.addEventListener('input', (e) => {\n            const target = e.target;\n            const field = target.name;\n            const value = target.value;\n            this.onInputChange(field, value);\n        });\n        this.container.addEventListener('submit', (e) => {\n            e.preventDefault();\n            this.events.emit(`${this.container.name}:submit`);\n        });\n    }\n    onInputChange(field, value) {\n        this.events.emit(`${this.container.name}:change`, {\n            field,\n            value\n        });\n    }\n    set valid(value) {\n        this.setElementDisabled(this._submit, !value);\n    }\n    set errors(value) {\n        this.setText(this._errors, value);\n    }\n    render(state) {\n        const { valid, errors } = state, inputs = __rest(state, [\"valid\", \"errors\"]);\n        super.render({ valid, errors });\n        Object.assign(this, inputs);\n        return this.container;\n    }\n}\n","import { FormBase } from './FormBase';\nexport class PurchaseForm extends FormBase {\n    constructor(container, events) {\n        super(container, events);\n        this._payment = Array.from(container.querySelectorAll('.order__buttons .button'));\n        this._address = container.querySelector('input[name=\"address\"]');\n        this._payment.forEach((button) => {\n            button.addEventListener('click', () => {\n                const payment = button.name;\n                this.setPaymentMethod(payment);\n                events.emit('order:payment-change', { payment });\n            });\n        });\n    }\n    setPaymentMethod(method) {\n        this._payment.forEach((button) => {\n            this.toggleClass(button, 'button_alt-active', button.name === method);\n        });\n    }\n    set payment(value) {\n        this.setPaymentMethod(value);\n    }\n    set address(value) {\n        this._address.value = value;\n    }\n    get address() {\n        return this._address.value;\n    }\n}\n","import { FormBase } from './FormBase';\nexport class ContactForm extends FormBase {\n    constructor(container, events) {\n        super(container, events);\n        this._email = container.querySelector('input[name=\"email\"]');\n        this._phone = container.querySelector('input[name=\"phone\"]');\n    }\n    set email(value) {\n        this._email.value = value;\n    }\n    get email() {\n        return this._email.value;\n    }\n    set phone(value) {\n        this._phone.value = value;\n    }\n    get phone() {\n        return this._phone.value;\n    }\n}\n","import { Element } from '../base/Element';\nexport class Confirmation extends Element {\n    constructor(container, actions) {\n        super(container);\n        this._close = container.querySelector('.order-success__close');\n        this._total = container.querySelector('.order-success__description');\n        if (actions === null || actions === void 0 ? void 0 : actions.click) {\n            this._close.addEventListener('click', actions.click);\n        }\n    }\n    set total(value) {\n        this.setText(this._total, `Списано ${value} синапсов`);\n    }\n}\n","export const API_URL = `${process.env.API_ORIGIN || 'https://larek-api.nomoreparties.co'}/api/weblarek`;\nexport const CDN_URL = `${process.env.API_ORIGIN || 'https://larek-api.nomoreparties.co'}/content/weblarek`;\nexport const pageSelectors = {\n    cardCatalog: '#card-catalog',\n    cardPreview: '#card-preview',\n    cardBasket: '#card-basket',\n    basket: '#basket',\n    order: '#order',\n    contacts: '#contacts',\n    success: '#success'\n};\n","export function pascalToKebab(value) {\n    return value.replace(/([a-z0–9])([A-Z])/g, \"$1-$2\").toLowerCase();\n}\nexport function isSelector(x) {\n    return (typeof x === \"string\") && x.length > 1;\n}\nexport function isEmpty(value) {\n    return value === null || value === undefined;\n}\nexport function ensureAllElements(selectorElement, context = document) {\n    if (isSelector(selectorElement)) {\n        return Array.from(context.querySelectorAll(selectorElement));\n    }\n    if (selectorElement instanceof NodeList) {\n        return Array.from(selectorElement);\n    }\n    if (Array.isArray(selectorElement)) {\n        return selectorElement;\n    }\n    throw new Error(`Unknown selector element`);\n}\nexport function ensureElement(selectorElement, context) {\n    if (isSelector(selectorElement)) {\n        const elements = ensureAllElements(selectorElement, context);\n        if (elements.length > 1) {\n            console.warn(`selector ${selectorElement} return more then one element`);\n        }\n        if (elements.length === 0) {\n            throw new Error(`selector ${selectorElement} return nothing`);\n        }\n        return elements.pop();\n    }\n    if (selectorElement instanceof HTMLElement) {\n        return selectorElement;\n    }\n    throw new Error('Unknown selector element');\n}\nexport function cloneTemplate(query) {\n    const template = ensureElement(query);\n    return template.content.firstElementChild.cloneNode(true);\n}\nexport function bem(block, element, modifier) {\n    let name = block;\n    if (element)\n        name += `__${element}`;\n    if (modifier)\n        name += `_${modifier}`;\n    return {\n        name,\n        class: `.${name}`\n    };\n}\nexport function getObjectProperties(obj, filter) {\n    return Object.entries(Object.getOwnPropertyDescriptors(Object.getPrototypeOf(obj)))\n        .filter(([name, prop]) => filter ? filter(name, prop) : (name !== 'constructor'))\n        .map(([name, prop]) => name);\n}\n/**\n * Устанавливает dataset атрибуты элемента\n */\nexport function setElementData(el, data) {\n    for (const key in data) {\n        el.dataset[key] = String(data[key]);\n    }\n}\n/**\n * Получает типизированные данные из dataset атрибутов элемента\n */\nexport function getElementData(el, scheme) {\n    const data = {};\n    for (const key in el.dataset) {\n        data[key] = scheme[key](el.dataset[key]);\n    }\n    return data;\n}\n/**\n * Проверка на простой объект\n */\nexport function isPlainObject(obj) {\n    const prototype = Object.getPrototypeOf(obj);\n    return prototype === Object.getPrototypeOf({}) ||\n        prototype === null;\n}\nexport function isBoolean(v) {\n    return typeof v === 'boolean';\n}\n/**\n * Фабрика DOM-элементов в простейшей реализации\n * здесь не учтено много факторов\n * в интернет можно найти более полные реализации\n */\nexport function createElement(tagName, props, children) {\n    const element = document.createElement(tagName);\n    if (props) {\n        for (const key in props) {\n            const value = props[key];\n            if (isPlainObject(value) && key === 'dataset') {\n                setElementData(element, value);\n            }\n            else {\n                // @ts-expect-error fix indexing later\n                element[key] = isBoolean(value) ? value : String(value);\n            }\n        }\n    }\n    if (children) {\n        for (const child of Array.isArray(children) ? children : [children]) {\n            element.append(child);\n        }\n    }\n    return element;\n}\nexport function formatPrice(price) {\n    if (price === null) {\n        return '';\n    }\n    return price.toString();\n}\n","import './scss/styles.scss';\nimport { EventEmitter } from './components/base/events';\nimport { ProductApi } from './components/api/ProductApi';\nimport { CollectionModel } from './components/models/CollectionModel';\nimport { CartModel } from './components/models/Cart';\nimport { PurchaseModel } from './components/models/PurchaseModel';\nimport { PageView } from './components/views/PageView';\nimport { ItemCard } from './components/views/ItemCard';\nimport { Dialog } from './components/views/Dialog';\nimport { Cart } from './components/views/Cart';\nimport { PurchaseForm } from './components/views/PurchaseForm';\nimport { ContactForm } from './components/views/ContactForm';\nimport { Confirmation } from './components/views/Confirmation';\nimport { API_URL, CDN_URL, pageSelectors } from './utils/constants';\nimport { cloneTemplate, formatPrice } from './utils/utils';\nconst events = new EventEmitter();\nconst cardCatalogTemplate = document.querySelector(pageSelectors.cardCatalog);\nconst cardPreviewTemplate = document.querySelector(pageSelectors.cardPreview);\nconst cardBasketTemplate = document.querySelector(pageSelectors.cardBasket);\nconst basketTemplate = document.querySelector(pageSelectors.basket);\nconst orderTemplate = document.querySelector(pageSelectors.order);\nconst contactsTemplate = document.querySelector(pageSelectors.contacts);\nconst successTemplate = document.querySelector(pageSelectors.success);\nconst api = new ProductApi(CDN_URL, API_URL);\nconst catalogModel = new CollectionModel(events);\nconst basketModel = new CartModel(events);\nconst orderModel = new PurchaseModel(events);\nconst page = new PageView(document.body, events);\nconst modal = new Dialog(document.querySelector('#modal-container'), events);\nconst basket = new Cart(cloneTemplate(basketTemplate), events);\nconst order = new PurchaseForm(cloneTemplate(orderTemplate), events);\nconst contacts = new ContactForm(cloneTemplate(contactsTemplate), events);\nlet isBasketOpen = false;\nfunction renderBasket() {\n    const basketItems = basketModel.getItems().map((item, index) => {\n        const card = new ItemCard('card', cloneTemplate(cardBasketTemplate), {\n            click: () => {\n                basketModel.remove(item.product.id);\n            }\n        });\n        const cardData = {\n            id: item.product.id,\n            title: item.product.title,\n            price: formatPrice(item.product.price)\n        };\n        card.index = index + 1;\n        card.render(cardData);\n        return card.container;\n    });\n    basket.render({\n        items: basketItems,\n        total: basketModel.getTotal(),\n        selected: basketModel.getCount() > 0\n    });\n}\nfunction createCard(product, actions) {\n    const cardElement = cloneTemplate(cardCatalogTemplate);\n    const card = new ItemCard('card', cardElement, actions);\n    return card;\n}\napi.getProductList()\n    .then(catalogModel.setProducts.bind(catalogModel))\n    .catch((error) => {\n    console.error('Ошибка загрузки каталога:', error);\n});\nevents.on('catalog:changed', () => {\n    const products = catalogModel.products;\n    page.catalog = products.map(product => {\n        const card = createCard(product, {\n            click: () => events.emit('card:select', product)\n        });\n        card.render({\n            id: product.id,\n            title: product.title,\n            image: product.image,\n            category: product.category,\n            price: formatPrice(product.price)\n        });\n        return card.container;\n    });\n});\nevents.on('card:select', (product) => {\n    const card = new ItemCard('card', cloneTemplate(cardPreviewTemplate), {\n        click: () => {\n            if (!product.price) {\n                return;\n            }\n            if (basketModel.contains(product.id)) {\n                basketModel.remove(product.id);\n            }\n            else {\n                basketModel.add(product);\n            }\n            modal.close();\n        }\n    });\n    const productView = {\n        id: product.id,\n        title: product.title,\n        description: product.description,\n        price: formatPrice(product.price),\n        image: product.image,\n        category: product.category,\n        button: {\n            text: product.price === null\n                ? 'Недоступно'\n                : basketModel.contains(product.id) ? 'Убрать из корзины' : 'В корзину',\n            disabled: product.price === null\n        }\n    };\n    modal.render({\n        content: card.render(productView)\n    });\n});\nevents.on('cart:updated', () => {\n    page.counter = basketModel.getCount();\n    if (isBasketOpen) {\n        renderBasket();\n    }\n});\nevents.on('basket:open', () => {\n    isBasketOpen = true;\n    renderBasket();\n    modal.render({ content: basket.container });\n});\nevents.on('order:open', () => {\n    modal.render({\n        content: order.render({\n            valid: false,\n            errors: []\n        })\n    });\n});\nevents.on('order:payment-change', (data) => {\n    orderModel.setPayment(data.payment);\n});\nevents.on('order:change', (data) => {\n    if (data.field === 'address') {\n        orderModel.setAddress(data.value);\n    }\n    order.render({\n        valid: orderModel.validateOrder(),\n        errors: orderModel.getOrderErrors()\n    });\n});\nevents.on('order:submit', () => {\n    if (orderModel.validateOrder()) {\n        modal.render({\n            content: contacts.render({\n                valid: false,\n                errors: []\n            })\n        });\n    }\n});\nevents.on('contacts:change', (data) => {\n    if (data.field === 'email') {\n        orderModel.setEmail(data.value);\n    }\n    else if (data.field === 'phone') {\n        orderModel.setPhone(data.value);\n    }\n    contacts.render({\n        valid: orderModel.validateContacts(),\n        errors: orderModel.getContactsErrors()\n    });\n});\nevents.on('contacts:submit', () => {\n    if (orderModel.validateContacts()) {\n        const orderData = orderModel.getOrderData(basketModel.getItems(), basketModel.getTotal());\n        const orderRequest = {\n            payment: orderData.payment,\n            email: orderData.email,\n            phone: orderData.phone,\n            address: orderData.address,\n            total: orderData.total,\n            items: orderData.items.map(item => item.product.id)\n        };\n        api.orderProducts(orderRequest)\n            .then((result) => {\n            const success = new Confirmation(cloneTemplate(successTemplate), {\n                click: () => {\n                    modal.close();\n                    basketModel.clear();\n                    orderModel.clear();\n                }\n            });\n            modal.render({\n                content: success.render({ total: result.total })\n            });\n        })\n            .catch((error) => {\n            console.error('Ошибка оформления заказа:', error);\n        });\n    }\n});\nevents.on('modal:open', () => {\n    page.locked = true;\n});\nevents.on('modal:close', () => {\n    isBasketOpen = false;\n    page.locked = false;\n});\n"],"names":["EventEmitter","_classCallCheck","this","_events","Map","_createClass","key","value","on","eventName","callback","_a","has","set","Set","get","add","off","size","emit","data","forEach","subscribers","name","RegExp","test","onAll","offAll","trigger","context","_this","event","arguments","length","undefined","Object","assign","ProductApi","_Api","_inherits","_super","_createSuper","cdn","baseUrl","options","call","getProduct","id","_this2","concat","then","item","image","getProductList","_this3","items","map","orderProducts","order","post","Api","headers","handleResponse","response","ok","json","Promise","reject","error","statusText","uri","fetch","method","body","JSON","stringify","Entity","events","emitChanges","payload","CollectionModel","_Entity","products","setProducts","product","title","description","price","category","getProducts","resolve","find","getTotal","CartModel","total","count","quantity","getItems","getCount","remove","productId","clear","Array","from","values","reduce","contains","PurchaseModel","setPayment","payment","setEmail","email","setPhone","phone","setAddress","address","validateOrder","trim","validateContacts","_b","getOrderData","getOrderErrors","errors","push","getContactsErrors","getErrors","_toConsumableArray","Element","container","toggleClass","element","className","force","classList","toggle","setText","textContent","String","setElementDisabled","state","setAttribute","removeAttribute","setHidden","style","display","setVisible","removeProperty","setImage","src","alt","render","PageView","_Element","_counter","querySelector","_catalog","_wrapper","_basket","addEventListener","_this$_catalog","replaceChildren","apply","CategoryClass","ItemCard","blockName","actions","_title","_image","_button","_description","_category","_price","_index","click","dataset","toString","text","disabled","Dialog","_closeButton","_content","close","bind","_assertThisInitialized","stopPropagation","open","content","_get","_getPrototypeOf","prototype","Cart","_list","_total","_this$_list","createElement","tagName","props","document","__rest","s","e","t","p","hasOwnProperty","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","FormBase","_submit","_errors","target","field","onInputChange","preventDefault","valid","inputs","PurchaseForm","_FormBase","_payment","querySelectorAll","_address","button","setPaymentMethod","ContactForm","_email","_phone","Confirmation","_close","API_URL","CDN_URL","pageSelectors","isSelector","x","ensureElement","selectorElement","elements","ensureAllElements","NodeList","isArray","Error","console","warn","pop","HTMLElement","cloneTemplate","query","firstElementChild","cloneNode","formatPrice","cardCatalogTemplate","cardPreviewTemplate","cardBasketTemplate","basketTemplate","orderTemplate","contactsTemplate","successTemplate","api","catalogModel","basketModel","orderModel","page","modal","basket","contacts","isBasketOpen","renderBasket","basketItems","index","card","cardData","selected","catalog","createCard","cardElement","productView","counter","orderData","orderRequest","result","success","locked"],"sourceRoot":""}